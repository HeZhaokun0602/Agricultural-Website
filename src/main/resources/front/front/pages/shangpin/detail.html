
<!-- 首页 -->
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>首页</title>
	<link rel="stylesheet" href="../../layui/css/layui.css">
	<!-- 样式 -->
	<link rel="stylesheet" href="../../css/style.css" />
	<!-- 主题（主要颜色设置） -->
	<link rel="stylesheet" href="../../css/theme.css" />
	<!-- 通用的css -->
	<link rel="stylesheet" href="../../css/common.css" />
</head>
<style>
	html::after {
		position: fixed;
		top: 0;
		right: 0;
		left: 0;
		bottom: 0;
		content: '';
		display: block;
		background-attachment: fixed;
		background-size: cover;
		background-position: center;
		z-index: -1;
	}
	#swiper {
		overflow: hidden;
	}
	#swiper .layui-carousel-ind li {
		width: 16px;
		height: 10px;
		border-width: 0;
		border-style: solid;
		border-color: rgba(0,0,0,.3);
		border-radius: 3px;
		background-color: #f7f7f7;
		box-shadow: 0 0 6px rgba(255,0,0,.8);
	}
	#swiper .layui-carousel-ind li.layui-this {
		width: 26px;
		height: 10px;
		border-width: 0;
		border-style: solid;
		border-color: rgba(0,0,0,.3);
		border-radius: 6px;
		background-color: rgba(135, 206, 250, 1);
		box-shadow: 0 0 6px rgba(255,0,0,.8);
	}

	input#buynumber::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; }
	input#buynumber[type="number"]{ -moz-appearance: textfield; }

	.message-container {width: 100%}

	.detail-tab .layui-tab-card>.layui-tab-title .layui-this {
		background-color: rgb(141, 205, 159);
		color: #fff;
		font-size: 14px;
	}
	.data-detail {
	padding-bottom: 20px;
	}
	.data-detail .layui-breadcrumb a.first {
	color: rgba(14, 14, 14, 1) !important;
	}
</style>
<body>
	<div id="app">
		<div class="data-detail">
			<div class="data-detail-breadcrumb" :style='{"backgroundColor":"rgba(0, 155, 251, 0)","height":"54px","margin":"0","padding":"0"}'>
				<span class="layui-breadcrumb">
					<a class="first" :style='{"padding":"8px 10px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0 5px","borderColor":"rgba(255,0,0,.3)","backgroundColor":"rgba(255, 255, 255, 0)","color":"rgba(14, 14, 14, 1)","borderRadius":"0","borderWidth":"0","fontSize":"16px","borderStyle":"solid"}' href="../home/home.html">首页</a>
					<a><cite :style='{"padding":"8px 15px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0 15px","borderColor":"rgba(255,0,0,.3)","backgroundColor":"rgba(255, 255, 255, 0)","color":"rgb(14, 14, 14)","borderRadius":"4px","borderWidth":"0","fontSize":"16px","borderStyle":"solid"}'>{{title}}</cite></a>
				</span>
			</div>
			<div class="layui-row" style="display: flex">
				<div class="layui-col-md5" style="width:420px;margin: 5px 40px">
					<div class="layui-carousel" id="swiper" :style='{"margin":"0 auto","borderRadius":"6px","borderWidth":"0","width":"420px","height":"400px"}'>
						<div carousel-item>
							<div v-if="swiperList.length" v-for="(item,index) in swiperList" :key="index">
								<img style="width: 100%;height: 100%;object-fit:cover;" :src="item" />
							</div>
						</div>
					</div>
					<div class="tool-container">
						<div @click="thumbsupnumClick()" style="display: flex;align-items: center;cursor: pointer;">
							<i class="layui-icon" style="font-size: 20px;color: red;margin-right: 10px;">&#xe6af;</i>
							赞一下({{detail.thumbsupnum}})
						</div>
						<div @click="crazilynumClick()" style="display: flex;align-items: center;cursor: pointer">
							<i class="layui-icon" style="font-size: 20px;color: red;margin-right: 10px;">&#xe69c;</i>
							踩一下({{detail.crazilynum}})
						</div>
					</div>
				</div>
				<div class="layui-col-md7" style="padding-left: 20px;flex: 1;" :style='{"padding":"0","margin":"5px 40px 5px 0px","backgroundColor":"#fff"}'>
					<h1 style="position: relative;" :style='{"padding":"10px 15px","boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgba(160, 67, 26, 1)","backgroundColor":"#fff","color":"#333","borderRadius":"0","textAlign":"center","borderWidth":"0px","fontSize":"18px","borderStyle":"solid"}' class="title">{{title}}</h1>
					<div :style='{"padding":"6px 0px","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0px 20px","backgroundColor":"#fff","borderRadius":"0","border-color":"#6A767D","borderWidth":"0 0 1px 0","borderStyle":"solid"}' v-if="detail.price" class="detail-item">
						<div style="float:left;height: 20px">
							<svg t="1711985712524" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3762" width="20" height="20"><path d="M815.5 208.6C734.5 127.7 626.8 83.1 512 83.1c-114.8 0-222.5 44.6-303.4 125.5C127.7 289.5 83.1 397.3 83.1 512c0 114.8 44.6 222.5 125.5 303.4 80.9 80.9 188.7 125.5 303.4 125.5 114.7 0 222.5-44.6 303.4-125.5C982.7 648.1 982.7 375.9 815.5 208.6zM776 776c-70.4 70.4-164.1 109.2-264 109.2-99.9 0-193.6-38.8-264-109.2-145.6-145.6-145.6-382.5 0-528 70.4-70.4 164.1-109.2 264-109.2 99.8 0 193.6 38.8 264 109.2 70.4 70.4 109.2 164.1 109.2 264S846.4 705.6 776 776z" p-id="3763"></path><path d="M667.7 506.9l0.4-0.1c9-2.9 15-11.2 15-20.6 0-11.9-9.6-21.5-21.5-21.5L531.7 464.7l0-39.8 133.5-132.2 0.2-0.4c0.9-1.8 1.8-5.1 2-8.5 0.4-5.7-1.5-11.3-5.4-15.8-3.6-4-9.6-6.4-16.2-6.4-5.7 0-11 1.8-14.5 5l-120.7 119L382.9 260.3l-0.1-0.1c-2.9-2.5-7.7-4-13.2-4-7 0-13.4 2.4-16.7 6.2-6.3 7.1-7.2 17.7-2.2 25.7l2.1 3.4 135.6 132.4 0 40.9-135.7 1-0.4 0-0.4 0.1c-9 2.9-15 11.2-15 20.5 0 9.4 6 17.6 15 20.5l3.5 1.1 132.8 0 0 66.8-135.7 1-0.4 0-0.3 0.1c-9 2.8-15 11.1-15 20.5 0 9.4 6 17.7 15 20.6l3.4 1.1 132.9 0 0.1 132.8 1.1 2.2c2.9 8.8 11.1 14.8 20.4 14.8 9.4 0 17.6-6 20.5-15l1.1-3.5L531.3 618.1l136-1 0.4-0.1c9-2.9 15-11.2 15-20.6 0-11.9-9.6-21.5-21.5-21.5L531.7 574.9 531.7 508 667.7 506.9z" p-id="3764"></path></svg>
						</div>
						<span :style='{"float":"left","padding":"0","width":"100%","fontSize":"14px","color":"#333","textAlign":"left"}'>&nbsp;价格：{{detail.price}}RMB</span>
					</div>
					<div :style='{"padding":"6px 0px","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0px 20px","backgroundColor":"#fff","borderRadius":"0","border-color":"#6A767D","borderWidth":"0 0 1px 0","borderStyle":"solid"}' v-if="detail.jifen" class="detail-item">
						<span :style='{"padding":"15px 0 0 0","width":"100%","fontSize":"14px","color":"#33","textAlign":"left"}'>&nbsp;积分：{{detail.jifen}}</span>
					</div>
					<div :style='{"padding":"6px 0px","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0px 20px","backgroundColor":"#fff","borderRadius":"0","border-color":"#6A767D","borderWidth":"0 0 1px 0","borderStyle":"solid"}' class="detail-item">
						<div style="float:left;height: 20px;padding: 15px 0 0 0;">
							<svg t="1711986051117" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5218" width="20" height="20"><path d="M883.8144 305.373867H140.1856a68.266667 68.266667 0 0 0-67.925333 75.178666l50.056533 491.52a68.266667 68.266667 0 0 0 67.925333 61.354667h643.5328a68.266667 68.266667 0 0 0 67.925334-61.354667l50.039466-491.52a68.266667 68.266667 0 0 0-67.925333-75.178666z m-743.6288 68.266666h743.6288l-50.039467 491.52H190.225067l-50.039467-491.52z" fill="#2c2c2c" p-id="5219"></path><path d="M607.573333 85.333333a102.4 102.4 0 0 1 102.331734 98.56L709.973333 187.733333v228.437334a34.133333 34.133333 0 0 1-68.164266 2.56l-0.1024-2.56V187.733333a34.133333 34.133333 0 0 0-31.573334-34.030933L607.573333 153.6H416.426667a34.133333 34.133333 0 0 0-34.030934 31.5904l-0.1024 2.56v228.420267a34.133333 34.133333 0 0 1-68.164266 2.56l-0.1024-2.56V187.733333a102.4 102.4 0 0 1 98.56-102.314666L416.426667 85.333333h191.146666z" fill="#2c2c2c" p-id="5220"></path><path d="M699.733333 733.866667v34.133333a34.133333 34.133333 0 0 1-34.133333 34.133333H358.4a34.133333 34.133333 0 0 1-34.133333-34.133333v-34.133333h375.466666z" fill="#2c2c2c" p-id="5221"></path></svg>
						</div>
						<span :style='{"padding":"15px 0 0 0","width":"100%","fontSize":"14px","color":"#333","textAlign":"left"}'>&nbsp;单次购买：{{detail.onelimittimes}}</span>
					</div>
					<div :style='{"padding":"6px 0px","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0px 20px","backgroundColor":"#fff","borderRadius":"0","border-color":"#6A767D","borderWidth":"0 0 1px 0","borderStyle":"solid"}' class="detail-item">
						<div style="float:left;height: 20px;padding: 15px 0 0 0;">
							<svg t="1711986273695" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6833" width="20" height="20"><path d="M853.333333 597.333333h-85.333333v-51.2l-256-256-256 256V768h256v85.333333H170.666667v-298.666666H128l384-384 384 384h-42.666667v42.666666z m-298.666666 42.666667h85.333333v85.333333h-85.333333v-85.333333z m0 128h85.333333v85.333333h-85.333333v-85.333333z m128-128h213.333333v85.333333h-213.333333v-85.333333z m0 128h213.333333v85.333333h-213.333333v-85.333333z" fill="#2c2c2c" p-id="6834"></path></svg>
						</div>
						<span :style='{"padding":"15px 0 0 0","width":"100%","fontSize":"14px","color":"#333","textAlign":"left"}'>&nbsp;库存：{{detail.alllimittimes}}</span>
					</div>
					<div :style='{"padding":"6px 0px","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0px 20px","backgroundColor":"#fff","borderRadius":"0","border-color":"#6A767D","borderWidth":"0 0 1px 0","borderStyle":"solid"}' class="detail-item">
						<div style="float:left;height: 20px;padding: 15px 0 0 0;">
							<svg t="1711986310443" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7985" width="20" height="20"><path d="M635.904 480.256h200.192c50.688 0 92.16-41.472 92.16-92.16V187.904c0-50.688-41.472-92.16-92.16-92.16h-200.192c-50.688 0-92.16 41.472-92.16 92.16v200.192c0.512 50.688 41.472 92.16 92.16 92.16z m-27.648-292.352c0-15.36 12.8-28.16 28.16-28.16h200.192c15.36 0 28.16 12.8 28.16 28.16v200.192c0 15.36-12.8 28.16-28.16 28.16h-200.192c-15.36 0-28.16-12.8-28.16-28.16V187.904zM388.096 544.256H187.904c-50.688 0-92.16 41.472-92.16 92.16v200.192c0 50.688 41.472 92.16 92.16 92.16h200.192c50.688 0 92.16-41.472 92.16-92.16v-200.192c0-51.2-41.472-92.16-92.16-92.16z m28.16 291.84c0 15.36-12.8 28.16-28.16 28.16H187.904c-15.36 0-28.16-12.8-28.16-28.16v-200.192c0-15.36 12.8-28.16 28.16-28.16h200.192c15.36 0 28.16 12.8 28.16 28.16v200.192zM388.096 96.256H187.904c-50.688 0-92.16 41.472-92.16 92.16v200.192c0 50.688 41.472 92.16 92.16 92.16h200.192c50.688 0 92.16-41.472 92.16-92.16V187.904c0-50.688-41.472-91.648-92.16-91.648z m28.16 291.84c0 15.36-12.8 28.16-28.16 28.16H187.904c-15.36 0-28.16-12.8-28.16-28.16V187.904c0-15.36 12.8-28.16 28.16-28.16h200.192c15.36 0 28.16 12.8 28.16 28.16v200.192zM923.648 870.912l-28.16-28.16c20.48-30.72 32.768-67.584 32.768-107.008 0-105.984-86.016-192-192-192s-192 86.016-192 192 86.016 192 192 192c43.008 0 82.944-14.336 115.2-38.4l27.136 27.136c12.288 12.288 32.768 12.288 45.056 0a32.768 32.768 0 0 0 0-45.568z m-315.392-134.656c0-70.656 57.344-128 128-128s128 57.344 128 128-57.344 128-128 128-128-57.856-128-128z" p-id="7986" fill="#2c2c2c"></path></svg>
						</div>
						<span :style='{"padding":"15px 0 0 0","width":"100%","fontSize":"14px","color":"#333","textAlign":"left"}'>&nbsp;类别：{{detail.leibie}}</span>
					</div>
					<div :style='{"padding":"6px 0px","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0px 20px","backgroundColor":"#fff","borderRadius":"0","border-color":"#6A767D","borderWidth":"0 0 1px 0","borderStyle":"solid"}' class="detail-item">
						<div style="float:left;height: 20px;padding: 15px 0 0 0;">
							<svg t="1711986359765" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3288" width="20" height="20"><path d="M989.078699 412.116125c-2.081847-42.532354-13.699895-91.578874-34.563134-146.042673-35.704792-93.190626-86.385449-170.868136-92.048968-179.419377L854.027282 73.871983H181.971319l-8.506471 10.879329C2.081847 303.636236 25.944736 437.27737 55.403987 497.471843c29.660721 60.619797 89.92235 99.816719 153.3851 99.816719h5.753061a236.927597 236.927597 0 0 0 159.093389-69.75306c27.243092 30.265128 74.274921 65.365512 145.863589 65.365512 77.699895 0 126.253935-42.532354 149.019937-69.193424 33.779643 27.243092 98.921301 71.2305 167.241693 71.2305 45.532004 0 84.728926-18.69185 116.538649-55.5383 26.996852-31.451556 39.376006-74.252536 36.779294-127.283665z m-329.44666-155.175936A28.519063 28.519063 0 0 0 631.269675 283.220707h-0.380553v196.611402c-12.916404 17.393494-48.822665 56.254634-111.367611 56.254635-69.148653 0-105.771249-47.009444-115.889472-62.455404v-188.172089a28.496677 28.496677 0 1 0-56.970969 0v187.119973a178.501574 178.501574 0 0 1-134.312696 68.051766h-3.536901c-34.316894 0-79.244491-21.064708-102.211963-68.141308S66.417629 318.813571 209.863589 130.75341h613.361315c64.022385 101.562784 153.407485 293.003148 85.601959 371.598461-20.527457 23.997202-44.435117 35.682406-73.066107 35.682407-65.119272 0-133.014341-59.164743-147.743967-72.819867v-178.546345a4.47709 4.47709 0 0 0 0.223855-1.298356 28.519063 28.519063 0 0 0-28.608605-28.429521zM862.869535 622.58412a28.787688 28.787688 0 0 0-28.742917 28.63099V841.6929A50.792585 50.792585 0 0 1 783.490731 892.530255H240.55404A50.792585 50.792585 0 0 1 189.828611 841.6929v-190.500175a28.698146 28.698146 0 1 0-57.396292 0v195.760755a102.973068 102.973068 0 0 0 102.816369 102.973068h553.480238a102.973068 102.973068 0 0 0 102.81637-102.973068V651.192725a28.810073 28.810073 0 0 0-28.675761-28.608605z" fill="#2c2c2c" p-id="3289"></path></svg>
						</div>
						<span :style='{"padding":"15px 0 0 0","width":"100%","fontSize":"14px","color":"#333","textAlign":"left"}'>&nbsp;店家名：{{detail.dianjiaming}}</span>
					</div>
					<div :style='{"padding":"6px 0px","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0px 20px","backgroundColor":"#fff","borderRadius":"0","border-color":"#6A767D","borderWidth":"0 0 1px 0","borderStyle":"solid"}' class="detail-item">
						<div style="float:left;height: 20px;padding: 15px 0 0 0;">
							<svg t="1711986413821" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4834" width="20" height="20"><path d="M515.338089 224.410687c-72.166316 0-130.90547 58.739155-130.90547 130.90547s58.739155 130.90547 130.90547 130.90547 130.90547-58.739155 130.905471-130.90547-58.739155-130.90547-130.905471-130.90547z m0 224.409377c-51.558055 0-93.503907-41.945853-93.503907-93.503907s41.945853-93.503907 93.503907-93.503907 93.503907 41.945853 93.503908 93.503907-41.945853 93.503907-93.503908 93.503907z" p-id="4835" fill="#2c2c2c"></path><path d="M765.610648 105.043599A356.287289 356.287289 0 0 0 512.028051 0.001309a356.249887 356.249887 0 0 0-253.582597 105.04229c-125.351338 125.332637-140.929089 361.149492-33.736209 504.023462L512.028051 1024 798.91674 609.646785c107.622997-143.453695 92.045246-379.270549-33.306092-504.603186z m2.973424 482.741972L512.028051 958.285454 255.060613 587.205847C157.83525 457.57203 171.767332 244.607531 284.90706 131.486504 345.572395 70.821168 426.228866 37.402872 512.028051 37.402872s166.455656 33.418296 227.139692 94.083632c113.139728 113.121027 127.07181 326.085526 29.416329 456.299067z" p-id="4836" fill="#2c2c2c"></path></svg>
						</div>
						<span :style='{"padding":"15px 0 0 0","width":"100%","fontSize":"14px","color":"#333","textAlign":"left"}'>&nbsp;生产地：{{detail.shengchandi}}</span>
					</div>
					<div class="detail-item" :style='{"padding":"6px 0px","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0px 20px","backgroundColor":"#fff","borderRadius":"0","border-color":"#6A767D","borderWidth":"0 0 1px 0","borderStyle":"solid"}'>
						<div class="num-picker" v-if="detail.alllimittimes">
							<button style="height:auto;" :style='{"padding":"0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#c3e6cb","color":"rgba(255, 255, 255, 1)","borderRadius":"4px 0 0 4px","borderWidth":"1px","width":"34px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}' type="button" @click="buynumber>1?buynumber--:buynumber" class="layui-btn layui-btn-primary">-</button>
							<input style="height:auto;" :style='{"padding":"0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#c3e6cb","color":"rgba(255, 255, 255, 1)","borderRadius":"0","borderWidth":"1px 0","width":"44px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}' type="number" v-model="buynumber" id="buynumber" name="buynumber" class="layui-input" disabled="disabled"></input>
							<button style="height:auto;" :style='{"padding":"0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#c3e6cb","color":"rgba(255, 255, 255, 1)","borderRadius":"0 4px 4px 0","borderWidth":"1px","width":"34px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}' type="button" @click="buynumber++" class="layui-btn layui-btn-primary">+</button>
						</div>
						<button v-if="detail.alllimittimes" style="height:auto;text-align: left" :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0 5px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgb(141, 205, 159)","borderRadius":"4px","borderWidth":"0","width":"auto","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}' @click="addCartTap" type="button" class="layui-btn layui-btn-warm">
							<svg t="1711974828365" class="icon" style="float: left;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3542" width="32" height="32"><path d="M848 712H318.4c-25.6 0-46.4-19.2-48-41.6L240 201.6c-1.6-25.6-16-46.4-38.4-57.6l-48-20.8c-12.8-4.8-25.6 0-32 12.8s0 25.6 12.8 32l46.4 20.8c6.4 3.2 11.2 9.6 11.2 17.6l28.8 468.8c3.2 48 46.4 86.4 96 86.4H848c12.8 0 24-11.2 24-24s-11.2-25.6-24-25.6z" p-id="3543"></path><path d="M884.8 265.6c-14.4-16-35.2-25.6-57.6-25.6H337.6c-12.8 0-24 11.2-24 24s11.2 24 24 24h489.6c8 0 16 3.2 20.8 9.6 4.8 6.4 8 14.4 8 22.4l-38.4 211.2v1.6c-1.6 14.4-12.8 24-27.2 25.6l-420.8 32c-12.8 1.6-22.4 12.8-22.4 25.6 1.6 12.8 11.2 22.4 24 22.4h1.6l419.2-32c36.8-3.2 67.2-30.4 70.4-67.2l38.4-212.8v-1.6c4.8-20.8-1.6-43.2-16-59.2z" p-id="3544"></path><path d="M305.6 856m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z" p-id="3545"></path><path d="M753.6 856m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z" p-id="3546"></path></svg>
							<span style="float:left;">添加到购物车</span>
						</button>
						<button v-if="detail.alllimittimes" style="height:auto" :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0 5px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#8DCD9F","color":"rgba(255, 255, 255, 1)","borderRadius":"4px","borderWidth":"0","width":"auto","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}' @click="buyTap" type="button" class="layui-btn btn-submit">
							立即购买
						</button>
						<button v-if="!detail.alllimittimes" style="height:auto;" :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0 5px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#8DCD9F","color":"#fff","borderRadius":"4px","borderWidth":"0","width":"auto","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}' type="button" class="layui-btn layui-btn-warm">
							商品无货
						</button>
					</div>
				</div>
			</div>
			<div class="layui-row detail-tab">
				<div class="layui-tab layui-tab-card" :style='{"boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgb(141, 205, 159)","backgroundColor":"#fff","borderRadius":"10px","borderStyle":"solid","borderWidth":"1px"}' style="overflow: hidden;">
					<ul class="layui-tab-title" :style='{"color":"rgba(135, 206, 250, 1)","backgroundColor":"#f2f2f2","fontSize":"14px"}'>
						<li class="layui-this">商品介绍</li>
						<li>评论</li>
					</ul>
					<div class="layui-tab-content">
						<div class="layui-tab-item layui-show">
							<div v-html="detail.shangpinjieshao"></div>
						</div>
						<div class="layui-tab-item">
							<div class="message-container">
								<form class="layui-form message-form" :style='{"padding":"20px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0 0 20px 0","borderColor":"rgba(135, 206, 250, 1)","backgroundColor":"#fff","borderRadius":"10px","borderWidth":"0","borderStyle":"solid"}'>
									<div class="layui-form-item layui-form-text" style="display: flex;align-items: center;margin:0">
										<label style="width: auto;" :style='{"padding":"0","minWidth":"54px","fontSize":"14px","color":"#333","textAlign":"left"}' class="layui-form-label">评论</label>
										<div class="layui-input-block" style="margin:0;flex:1;">
											<textarea :style='{"padding":"10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","borderColor":"rgba(135, 206, 250, 1)","backgroundColor":"#fff","color":"rgba(135, 206, 250, 1)","borderRadius":"10px","borderWidth":"1px","fontSize":"14px","borderStyle":"solid","height":"120px"}' name="content" required lay-verify="required" placeholder="请输入内容" class="layui-textarea"></textarea>
										</div>
									</div>
									<div class="layui-form-item">
										<div class="layui-input-block">
											<button :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"10px 5px 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgb(141, 205, 159)","color":"rgba(255, 255, 255, 1)","borderRadius":"4px","borderWidth":"0","width":"auto","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}' class="layui-btn btn-submit" lay-submit lay-filter="*">立即提交</button>
											<button :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"10px 5px 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgb(141, 205, 159)","color":"rgba(255, 255, 255, 1)","borderRadius":"4px","borderWidth":"0","width":"auto","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}' type="reset" class="layui-btn layui-btn-primary">重置</button>
										</div>
									</div>
								</form>
								<div class="message-list" :style='{"padding":"0 20px 20px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0","borderColor":"rgba(135, 206, 250, 1)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0","borderStyle":"solid"}'>
									<div :style='{"padding":"20px 0","boxShadow":"0 0 0px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","borderRadius":"0","borderWidth":"0 0 1px 0","borderStyle":"solid"}' class="message-item" v-for="(item,index) in dataList" v-bind:key="index">
										<div class="username-container">
											<img :style='{"boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0 10px 0 0","borderColor":"rgba(0,0,0,.3)","borderRadius":"50%","borderWidth":"0","width":"40px","borderStyle":"solid","height":"40px"}' class="avator" src="http://codegen.caihongy.cn/20210210/da7da186d1e941d7aaf2d89adf1cdc41.jpg">
											<span style="display: inline-block;" :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"#fff","color":"rgba(6, 82, 121, 1)","borderRadius":"4px","borderWidth":"0","width":"auto","lineHeight":"28px","fontSize":"14px","borderStyle":"solid"}' class="username">{{item.nickname}}</span>
										</div>
										<div class="content" style="margin: 0;flex: 1;">
											<span style="display: inline-block;" :style='{"padding":"8px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"8px 0 0 50px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(255, 0, 0, 0)","color":"rgba(135, 206, 250, 1)","borderRadius":"4px","borderWidth":"0","fontSize":"14px","borderStyle":"solid"}' class="message">
												{{item.content}}
											</span>
										</div>
										<div v-if="item.reply" class="content" style="margin: 0;flex: 1;">
											<span style="display: inline-block;" :style='{"padding":"8px","boxShadow":"0 0 0px rgba(255,0,0,.3)","margin":"8px 0 0 50px","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(255, 0, 0, 0)","color":"rgba(135, 206, 250, 1)","borderRadius":"4px","borderWidth":"0","fontSize":"14px","borderStyle":"solid"}' class="message">
												回复:{{item.reply}}
											</span>
										</div>
									</div>
								</div>
								<div class="pager" id="pager"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="../../layui/layui.js"></script>
	<script src="../../js/vue.js"></script>
	<!-- 组件配置信息 -->
	<script src="../../js/config.js"></script>
	<!-- 扩展插件配置信息 -->
	<script src="../../modules/config.js"></script>
	<!-- 工具方法 -->
	<script src="../../js/utils.js"></script>

	<script>
		var vue = new Vue({
			el: '#app',
			data: {
				// 轮播图
				swiperList: [],
				// 数据详情
				detail: {
					id: 0
				},
				// 商品标题
				title: '',
				// 倒计时
				count: 0,
				// 加入购物车数量
				buynumber: 1,
				// 当前详情页表
				detailTable: 'shangpin',
				// 评价列表
				dataList: [],
				storeupFlag: 0,
				// 选座座位列表
				numberList: []
			},
			// 倒计时效果
			computed: {
				SecondToDate: function() {
					var time = this.count;
					if (null != time && "" != time) {
						if (time > 60 && time < 60 * 60) {
							time =
								parseInt(time / 60.0) +
								"分钟" +
								parseInt((parseFloat(time / 60.0) - parseInt(time / 60.0)) * 60) +
								"秒";
						} else if (time >= 60 * 60 && time < 60 * 60 * 24) {
							time =
								parseInt(time / 3600.0) +
								"小时" +
								parseInt(
									(parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
								) +
								"分钟" +
								parseInt(
									(parseFloat(
											(parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
										) -
										parseInt(
											(parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
										)) *
									60
								) +
								"秒";
						} else if (time >= 60 * 60 * 24) {
							time =
								parseInt(time / 3600.0 / 24) +
								"天" +
								parseInt(
									(parseFloat(time / 3600.0 / 24) - parseInt(time / 3600.0 / 24)) *
									24
								) +
								"小时" +
								parseInt(
									(parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
								) +
								"分钟" +
								parseInt(
									(parseFloat(
											(parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
										) -
										parseInt(
											(parseFloat(time / 3600.0) - parseInt(time / 3600.0)) * 60
										)) *
									60
								) +
								"秒";
						} else {
							time = parseInt(time) + "秒";
						}
					}
					return time;
				}
			},
			//  清除定时器
			destroyed: function() {
				window.clearInterval(this.inter);
			},
			methods: {
				jump(url) {
					jump(url)
				},
				isAuth(tablename, button) {
					return isFrontAuth(tablename, button)
				},
				// 倒计时初始化
				countDown() {
					let reversetime = new Date(this.detail.reversetime).getTime()
					let now = new Date().getTime();
					let count = reversetime - now;
					if (count > 0) {
						this.count = count / 1000
						var _this = this;
						this.inter = window.setInterval(function() {
							_this.count = _this.count - 1;
							if (_this.count < 0) {
								window.clearInterval(_this.inter);
								layer.msg("活动已结束", {
									time: 2000,
									icon: 5
								})
							}
						}, 1000);
					}
				},
				
	    // 赞
				thumbsupnumClick() {
					this.detail.thumbsupnum = parseInt(this.detail.thumbsupnum) + 1
					layui.http.requestJson(`${this.detailTable}/update`, 'post', this.detail, function(res) {
						console.log(res);
					})
				},
				// 踩
				crazilynumClick() {
					this.detail.crazilynum = parseInt(this.detail.crazilynum) + 1
					layui.http.requestJson(`${this.detailTable}/update`, 'post', this.detail, function(res) {
						console.log(res);
					})
				},
				// 下载文件
				downFile(url) {
					var download = $("#download");
					download.append(
						"<a id=\"down\" href=\"aaaa.txt\" target=\"_blank\" download=\"aaaa.txt\" style=\"display:none\">下载该文件</a>");
					console.log(download);
					$("#down")[0].click();
				},
				// 跨表
				onAcrossTap(acrossTable){
					localStorage.setItem('crossTable',`shangpin`);
					localStorage.setItem('crossObj', JSON.stringify(this.detail));
					jump(`../${acrossTable}/add.html?corss=true`);
				},

				// 添加到购物车
				addCartTap() {
					// 活动倒计时限制
					// 单次购买限制
					if (this.detail.onelimittimes > 0 && this.detail.onelimittimes < this.buynumber) {
						layer.msg(`每人单次只能购买${this.detail.onelimittimes}件`, {
							time: 2000,
							icon: 5
						});
						return
					}
					// 库存不够
					if (this.detail.alllimittimes <= 0 ) {
						layer.msg(`商品已售罄`, {
							time: 2000,
							icon: 5
						});
						return
					}
					// 库存限制
					if (this.detail.alllimittimes > 0 && this.detail.alllimittimes < this.buynumber) {
						layer.msg(`库存不足`, {
							time: 2000,
							icon: 5
						});
						return
					}
					// 查询是否已经添加到购物车
					layui.http.request('cart/list', 'get', {
						userid: localStorage.getItem('userid'),
						tablename: `${this.detailTable}`,
						goodid: this.detail.id
					}, (res) => {
						if (res.data.list.length > 0) {
							layer.msg("该商品已经添加到购物车", {
								time: 2000,
								icon: 5
							});
							return
						}
						layui.http.requestJson('cart/save', 'post', {
							tablename: `${this.detailTable}`,
							goodid: this.detail.id,
							goodname: this.title,
							picture: this.swiperList[0],
							buynumber: this.buynumber,
							userid: localStorage.getItem('userid'),
							price: this.detail.price,
							discountprice: this.detail.vipprice ? this.detail.vipprice : 0
						}, (res) => {
							layer.msg("添加到购物车成功", {
								time: 2000,
								icon: 6
							});
						});
					})
				},

				// 立即购买
				buyTap() {
					// 活动倒计时限制
					// 单次购买限制
					if (this.detail.onelimittimes > 0 && this.detail.onelimittimes < this.buynumber) {
						layer.msg(`每人单次只能购买${this.detail.onelimittimes}件`, {
							time: 2000,
							icon: 5
						});
						return
					}
					// 库存不够
					if (this.detail.alllimittimes <= 0 ) {
						layer.msg(`商品已售罄`, {
							time: 2000,
							icon: 5
						});
						return
					}
					// 库存限制
					if (this.detail.alllimittimes > 0 && this.detail.alllimittimes < this.buynumber) {
						layer.msg(`库存不足`, {
							time: 2000,
							icon: 5
						});
						return
					}
					// 保存到storage中，在确认下单页面中获取要购买的商品
					localStorage.setItem('orderGoods', JSON.stringify([{
						tablename: `${this.detailTable}`,
						goodid: this.detail.id,
						goodname: this.title,
						picture: this.swiperList[0],
						buynumber: this.buynumber,
						userid: localStorage.getItem('userid'),
						price: this.detail.price,
						discountprice: this.detail.vipprice ? this.detail.vipprice : 0
					}]));
					// 跳转到确认下单页面
					jump('../shop-order/confirm.html');
				},


	    // 收藏商品
				storeUp() {
					layui.http.request('storeup/list', 'get', {
						page: 1,
						limit: 1,
						refid : this.detail.id,
						tablename : this.detailTable,
						userid: localStorage.getItem('userid'),
					}, (res) => {
						vue.dataList = res.data.list
						if(res.data.list.length==1) {
							layui.http.requestJson(`storeup/delete`, 'post', [res.data.list[0].id], function(res) {
								layer.msg('取消成功', {
									time: 1000,
									icon: 5
								}, function() {
									window.location.reload();
								});
							});
							return;
						}
						layui.http.requestJson('storeup/save', 'post', {
							userid: localStorage.getItem('userid'),
							name: this.title,
							picture: this.swiperList[0],
							refid: this.detail.id,
							tablename: this.detailTable
						}, function(res) {
							layer.msg('收藏成功', {
								time: 1000,
								icon: 6
							}, function() {
								window.location.reload();
							});
						});
					});
				},


			}
		})

		layui.use(['layer', 'form', 'element', 'carousel', 'http', 'jquery', 'laypage'], function() {
			var layer = layui.layer;
			var element = layui.element;
			var form = layui.form;
			var carousel = layui.carousel;
			var http = layui.http;
			var jquery = layui.jquery;
			var laypage = layui.laypage;

			var limit = 10;

			// 数据ID
			var id = http.getParam('id');
			vue.detail.id = id;

			// 商品信息
			http.request(`${vue.detailTable}/detail/` + id, 'get', {}, function(res) {
				// 详情信息
				vue.detail = res.data
				vue.title = vue.detail.shangpinmingcheng;
				// 轮播图片
				vue.swiperList = vue.detail.tupian ? vue.detail.tupian.split(",") : [];
				// var swiperItemHtml = '';
				// for (let item of vue.swiperList) {
				// 	swiperItemHtml +=
				// 		'<div>' +
				// 		'<img class="swiper-item" style="width: 100%;height: 100%;object-fit:cover;" src="' + item + '">' +
				// 		'</div>';
				// }
				// jquery('#swiper-item').html(swiperItemHtml);
				// 轮播图
				vue.$nextTick(() => {
				  carousel.render({
					elem: '#swiper',
					width: '420px',
					height: '400px',
					arrow: 'hover',
					anim: 'default',
					autoplay: 'true',
					interval: '3000',
					indicator: 'inside'
				  });

				})
				// carousel.render({
				// 	elem: '#swiper',
				// 	width: swiper.width,height:swiper.height,
				// 	arrow: swiper.arrow,
				// 	anim: swiper.anim,
				// 	interval: swiper.interval,
				// 	indicator: swiper.indicator
				// });



			});
			if(localStorage.getItem('userid')){
				http.request(`storeup/list`, 'get', {
					page: 1,
					limit: 1,
					refid : vue.detail.id,
					tablename : vue.detailTable,
					userid: localStorage.getItem('userid'),
				}, function(res) {
					vue.storeupFlag = res.data.list.length;
					console.log(vue.storeupFlag)
				})
			}

			// 获取评论
			http.request(`discuss${vue.detailTable}/list`, 'get', {
				page: 1,
				limit: limit,
				refid : vue.detail.id
			}, function(res) {
				vue.dataList = res.data.list
				// 分页
				laypage.render({
					elem: 'pager',
					count: res.data.total,
					limit: limit,
					jump: function(obj, first) {
						//首次不执行
						if (!first) {
							http.request(`discuss${vue.detailTable}/list`, 'get', {
								page: obj.curr,
								limit: obj.limit,
								refid : vue.detail.id
							}, function(res) {
								vue.dataList = res.data.list
							})
						}
					}
				});
			})

			// 提交评论
			form.on('submit(*)', function(data) {
				data = data.field;
				data.userid = localStorage.getItem('userid')
				data.nickname = localStorage.getItem('adminName')
				data.refid = vue.detail.id
				http.requestJson(`discuss${vue.detailTable}/save`, 'post', data, function(res) {
					layer.msg('评论成功', {
						time: 2000,
						icon: 6
					}, function() {
						window.location.reload();
					});
					return false
				});
				return false
			});

			});
		</script>
	</body>
</html>
